#!/bin/bash

# Full path to the current directory
dir_path=$(pwd)

# Sample fcrontab files
samples=(
  "$dir_path/sample1.fcrontab"
  "$dir_path/sample2.fcrontab"
  "$dir_path/sample3.fcrontab"
)

# Generate sample fcrontab files
for i in {0..2}; do
  length=$(( (i + 1) * 500 ))
  echo "Creating sample ${samples[$i]} with length $length characters"
  perl -e "print '0 5 * * * echo hello\n' x (($length - 20) / 20)" > "${samples[$i]}"
done

# Run the benchmark
for sample in "${samples[@]}"; do
  echo "Converting $(basename $sample)"
  start=$(date +%s.%N)
  ./fcron-3.0.0/convert-fcrontab "$sample"
  end=$(date +%s.%N)
  elapsed=$(echo "$end - $start" | bc)
  echo "Elapsed time: $elapsed seconds"
done

